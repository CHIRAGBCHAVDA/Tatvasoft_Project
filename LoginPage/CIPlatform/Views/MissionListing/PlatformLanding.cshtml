<script src="~/js/MissionListing.js"> </script>

@{
    ViewData["Title"] = "Home Page";
}

<div class="container-fluid">
    <div class="main-wrapper">
      
        <partial name="_Header" />
        <partial name="_Filter" />

        <div class="mission-main-wrapper container mt-3">
            <div class="head-sort d-flex justify-content-between ">
                <div class="explore-head">
                    <p class="fs-3 fw-lighter">Explore <span class="fs-2 fw-bolder" id="totalMissionFilterSpan"> @ViewBag.totalMissions </span> Missions</p>
                </div>
                <div class="sort-head d-flex align-items-center">

                    <select class="form-select mx-2" aria-label="Default select example" id="sortingMission">
                        <option selected>Sort By</option>
                        <option value="1">Newest</option>
                        <option value="2">Oldest</option>
                        <option value="3">Highest Available seats</option>
                        <option value="4">Lowest Available seats</option>
                    </select>

                    <div class=" p-2 mx-1">
                        <button id="grid" class="rounded-circle border-0 p-1 ">
                            <img src="~/assets/grid.png" alt="" class="">
                        </button>
                    </div>
                    <div class="rounded-circle p-2 mx-1">
                        <button id="list" class="rounded-circle border-0 p-2 bg-white" >
                            <img src="~/assets/list.png" alt="" class="">
                        </button>
                    </div>

                </div>
            </div>
            <div id="partialView">
                <partial name="_MissionNotFound"/>
            </div>

            <hr/>
            <div class="related-mission-div mt-5">
                @*<partial name = "_RelatedMissions"/>*@

            </div>

        </div>
    </div>

    @{
        double d = @ViewBag.totalMissions / 3.0;
        double pages = Math.Ceiling(d);
    }
    <nav class="d-flex justify-content-center mt-5">
        <ul class="pagination">
            <li class="page-item"><a class="page-link"><span>&laquo;</span></a></li>
            <li class="page-item"><a class="page-link"><img src="~/assets/left.png"/></a></li>
            @for(int i = 1; i <= @pages; i++)
            {
                <li class="page-item" id="@i"><a class="page-link">@i</a></li>
            }
            <li class="page-item"><a class="page-link"><span>&raquo;</span></a></li>
            <li class="page-item"><a class="page-link"><img src="~/assets/arrow.png"/></a></li>
        </ul>
    </nav>



</div>



<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>


<script type="text/javascript">
     $(document).ready(function() {
         $("#partialView").load('/MissionListing/GetGridView');
     });
     $('#list').click(function() {
         $("#partialView").load('/MissionListing/GetListView');
     });
     $('#grid').click(function() {
         $("#partialView").load('/MissionListing/GetGridView');
     });

    const btn1 = document.getElementById("grid");
    const btn2 = document.getElementById("list");
    btn1.addEventListener("click", function() {
        btn2.classList.toggle("bg-white");
        btn1.classList.remove("bg-white");
        console.log("Button 1 clicked")
    });
    btn2.addEventListener("click", function() {
        btn1.classList.toggle("bg-white");
        btn2.classList.remove("bg-white");
      console.log("Button 2 clicked")
    });


</script>